{"version":3,"sources":["webpack:///src/app/common/affiliate-code/affiliate-code-routing.module.ts","webpack:///src/app/common/affiliate-code/affiliate-code.module.ts","webpack:///src/app/common/affiliate-code/affiliate-code.page.scss","webpack:///src/app/common/affiliate-code/affiliate-code.page.ts","webpack:///src/app/common/affiliate-code/affiliate-code.page.html"],"names":["routes","path","component","AffiliateCodePageRoutingModule","imports","forChild","exports","AffiliateCodePageModule","declarations","AffiliateCodePage","alert","userService","auth","affilitateCode","discounts","refresher","isSubmitting","discountsShared","getUpdateNotifier","subscribe","result","resource","complete","getUser","then","user","phone","request","ev","target","discountId","useDiscount","pipe","error","presentError","presentSuccess","balanceShared","navigator","clipboard","writeText","presentToast","selector","template"],"mappings":"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","file":"common-affiliate-code-affiliate-code-module-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { AffiliateCodePage } from './affiliate-code.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: AffiliateCodePage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class AffiliateCodePageRoutingModule {}\n","import { CommonDeclarationsModule } from './../common-declarations/common-declarations.module';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { AffiliateCodePageRoutingModule } from './affiliate-code-routing.module';\n\nimport { AffiliateCodePage } from './affiliate-code.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    AffiliateCodePageRoutingModule,\n    CommonDeclarationsModule\n  ],\n  declarations: [AffiliateCodePage]\n})\nexport class AffiliateCodePageModule {}\n","export default \"@font-face {\\n  font-family: myIranSans;\\n  src: url('IRANSans.ttf');\\n  font-weight: 400;\\n}\\n@font-face {\\n  font-family: myIranSans;\\n  src: url('IRANSans_Bold.ttf');\\n  font-weight: 700;\\n}\\n@font-face {\\n  font-family: myIranSans;\\n  src: url('IRANSans_Light.ttf');\\n  font-weight: 300;\\n}\\n@font-face {\\n  font-family: myIranSansFaNum;\\n  src: url('IRANSans(FaNum)_UltraLight.ttf');\\n  font-weight: 200;\\n}\\n@font-face {\\n  font-family: myIranSansFaNum;\\n  src: url('IRANSans(FaNum)_Medium.ttf');\\n  font-weight: 500;\\n}\\n@font-face {\\n  font-family: myIranSansFaNum;\\n  src: url('IRANSans(FaNum).ttf');\\n  font-weight: 400;\\n}\\n@font-face {\\n  font-family: myIranSansFaNum;\\n  src: url('IRANSans(FaNum)_Bold.ttf');\\n  font-weight: 700;\\n}\\n@font-face {\\n  font-family: myIranSansFaNum;\\n  src: url('IRANSans(FaNum)_Light.ttf');\\n  font-weight: 300;\\n}\\n@font-face {\\n  font-family: myIranSansFaNum;\\n  src: url('IRANSans(FaNum)_UltraLight.ttf');\\n  font-weight: 200;\\n}\\n@font-face {\\n  font-family: myIranSansFaNum;\\n  src: url('IRANSans(FaNum)_Medium.ttf');\\n  font-weight: 500;\\n}\\n.affiliate-code {\\n  padding-top: 3px;\\n  cursor: pointer;\\n}\\n.icon-button {\\n  height: 27px;\\n  width: 27px;\\n}\\n.icon-button ion-icon {\\n  --ionicon-stroke-width: 40px;\\n  color: #c7bebe;\\n}\\n.discounts .discount {\\n  border: 1px solid #ffa198;\\n  border-radius: 5px;\\n  -webkit-border-radius: 5px;\\n  -moz-border-radius: 5px;\\n  --border-radius:$radius;\\n}\\n.discounts .discount .use-discount-button {\\n  margin: 10px 0;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy90aGVtZS9mb250cy5zY3NzIiwic3JjL2FwcC9jb21tb24vYWZmaWxpYXRlLWNvZGUvYWZmaWxpYXRlLWNvZGUucGFnZS5zY3NzIiwic3JjL3RoZW1lL2NvbW1vbi5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksdUJBQUE7RUFDQSx3QkFBQTtFQUNBLGdCQUFBO0FDQ0o7QURDRTtFQUNFLHVCQUFBO0VBQ0EsNkJBQUE7RUFDQSxnQkFBQTtBQ0NKO0FEQ0U7RUFDRSx1QkFBQTtFQUNBLDhCQUFBO0VBQ0EsZ0JBQUE7QUNDSjtBRENFO0VBQ0UsNEJBQUE7RUFDQSwwQ0FBQTtFQUNBLGdCQUFBO0FDQ0o7QURDRTtFQUNFLDRCQUFBO0VBQ0Esc0NBQUE7RUFDQSxnQkFBQTtBQ0NKO0FEQ0U7RUFDRSw0QkFBQTtFQUNBLCtCQUFBO0VBQ0EsZ0JBQUE7QUNDSjtBRENFO0VBQ0UsNEJBQUE7RUFDQSxvQ0FBQTtFQUNBLGdCQUFBO0FDQ0o7QURDRTtFQUNFLDRCQUFBO0VBQ0EscUNBQUE7RUFDQSxnQkFBQTtBQ0NKO0FEQ0U7RUFDRSw0QkFBQTtFQUNBLDBDQUFBO0VBQ0EsZ0JBQUE7QUNDSjtBRENFO0VBQ0UsNEJBQUE7RUFDQSxzQ0FBQTtFQUNBLGdCQUFBO0FDQ0o7QUFoREE7RUFDRSxnQkFBQTtFQUNBLGVBQUE7QUFrREY7QUFoREE7RUFDRSxZQUFBO0VBQ0EsV0FBQTtBQW1ERjtBQWxERTtFQUNFLDRCQUFBO0VBQ0EsY0FBQTtBQW9ESjtBQWhERTtFQUNFLHlCQUFBO0VDNEJILGtCRDNCMEI7RUM0QjFCLDBCRDVCMEI7RUM2QnZCLHVCRDdCdUI7RUM4QnZCLHVCQUFBO0FEd0JKO0FBcERJO0VBRUUsY0FBQTtBQXFETiIsImZpbGUiOiJzcmMvYXBwL2NvbW1vbi9hZmZpbGlhdGUtY29kZS9hZmZpbGlhdGUtY29kZS5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJAZm9udC1mYWNlIHtcbiAgICBmb250LWZhbWlseTogbXlJcmFuU2FucztcbiAgICBzcmM6IHVybCgnLi4vYXNzZXRzL2ZvbnRzL0lSQU5TYW5zLnR0ZicpO1xuICAgIGZvbnQtd2VpZ2h0OiA0MDA7XG4gIH1cbiAgQGZvbnQtZmFjZSB7XG4gICAgZm9udC1mYW1pbHk6IG15SXJhblNhbnM7XG4gICAgc3JjOiB1cmwoJy4uL2Fzc2V0cy9mb250cy9JUkFOU2Fuc19Cb2xkLnR0ZicpO1xuICAgIGZvbnQtd2VpZ2h0OiA3MDA7XG4gIH1cbiAgQGZvbnQtZmFjZSB7XG4gICAgZm9udC1mYW1pbHk6IG15SXJhblNhbnM7XG4gICAgc3JjOiB1cmwoJy4uL2Fzc2V0cy9mb250cy9JUkFOU2Fuc19MaWdodC50dGYnKTtcbiAgICBmb250LXdlaWdodDogMzAwO1xuICB9XG4gIEBmb250LWZhY2Uge1xuICAgIGZvbnQtZmFtaWx5OiBteUlyYW5TYW5zRmFOdW07XG4gICAgc3JjOiB1cmwoJy4uL2Fzc2V0cy9mb250cy9JUkFOU2FucyhGYU51bSlfVWx0cmFMaWdodC50dGYnKTtcbiAgICBmb250LXdlaWdodDogMjAwO1xuICB9XG4gIEBmb250LWZhY2Uge1xuICAgIGZvbnQtZmFtaWx5OiBteUlyYW5TYW5zRmFOdW07XG4gICAgc3JjOiB1cmwoJy4uL2Fzc2V0cy9mb250cy9JUkFOU2FucyhGYU51bSlfTWVkaXVtLnR0ZicpO1xuICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gIH1cbiAgQGZvbnQtZmFjZSB7XG4gICAgZm9udC1mYW1pbHk6IG15SXJhblNhbnNGYU51bTtcbiAgICBzcmM6IHVybCgnLi4vYXNzZXRzL2ZvbnRzL0lSQU5TYW5zKEZhTnVtKS50dGYnKTtcbiAgICBmb250LXdlaWdodDogNDAwO1xuICB9XG4gIEBmb250LWZhY2Uge1xuICAgIGZvbnQtZmFtaWx5OiBteUlyYW5TYW5zRmFOdW07XG4gICAgc3JjOiB1cmwoJy4uL2Fzc2V0cy9mb250cy9JUkFOU2FucyhGYU51bSlfQm9sZC50dGYnKTtcbiAgICBmb250LXdlaWdodDogNzAwO1xuICB9XG4gIEBmb250LWZhY2Uge1xuICAgIGZvbnQtZmFtaWx5OiBteUlyYW5TYW5zRmFOdW07XG4gICAgc3JjOiB1cmwoJy4uL2Fzc2V0cy9mb250cy9JUkFOU2FucyhGYU51bSlfTGlnaHQudHRmJyk7XG4gICAgZm9udC13ZWlnaHQ6IDMwMDtcbiAgfVxuICBAZm9udC1mYWNlIHtcbiAgICBmb250LWZhbWlseTogbXlJcmFuU2Fuc0ZhTnVtO1xuICAgIHNyYzogdXJsKCcuLi9hc3NldHMvZm9udHMvSVJBTlNhbnMoRmFOdW0pX1VsdHJhTGlnaHQudHRmJyk7XG4gICAgZm9udC13ZWlnaHQ6IDIwMDtcbiAgfVxuICBAZm9udC1mYWNlIHtcbiAgICBmb250LWZhbWlseTogbXlJcmFuU2Fuc0ZhTnVtO1xuICAgIHNyYzogdXJsKCcuLi9hc3NldHMvZm9udHMvSVJBTlNhbnMoRmFOdW0pX01lZGl1bS50dGYnKTtcbiAgICBmb250LXdlaWdodDogNTAwO1xuICB9IiwiQGltcG9ydCAnc3JjL3RoZW1lL2NvbW1vbi5zY3NzJztcbi5hZmZpbGlhdGUtY29kZSB7XG4gIHBhZGRpbmctdG9wOiAzcHg7XG4gIGN1cnNvcjogcG9pbnRlcjtcbn1cbi5pY29uLWJ1dHRvbiB7XG4gIGhlaWdodDogMjdweDtcbiAgd2lkdGg6IDI3cHg7XG4gIGlvbi1pY29uIHtcbiAgICAtLWlvbmljb24tc3Ryb2tlLXdpZHRoOiA0MHB4O1xuICAgIGNvbG9yOiAjYzdiZWJlO1xuICB9XG59XG4uZGlzY291bnRze1xuICAuZGlzY291bnR7XG4gICAgYm9yZGVyOjFweCBzb2xpZCAkc2Vjb25kYXJ5LWNvbG9yLXhsaWdodDtcbiAgICBAaW5jbHVkZSBib3JkZXItcmFkaXVzKDVweCk7XG5cbiAgICAudXNlLWRpc2NvdW50LWJ1dHRvblxuICAgIHtcbiAgICAgIG1hcmdpbjoxMHB4IDA7XG4gICAgfVxuICB9XG59XG4iLCJcbkBpbXBvcnQgJ2ZvbnRzLnNjc3MnO1xuJGZvbnQgOiBcIm15SXJhblNhbnNcIjtcbiRmb250TnVtIDogXCJteUlyYW5TYW5zRmFOdW1cIjtcbiRwcmltYXJ5LWNvbG9yLWRhcms6ICM0Nzk2OWI7XG4kcHJpbWFyeS1jb2xvci1saWdodDojYTVkYWRlO1xuJHByaW1hcnktY29sb3IteGRhcms6IzJjODE4NjtcbiRwcmltYXJ5LWNvbG9yLXhsaWdodDojZDdmM2Y2O1xuJHByaW1hcnktY29sb3I6ICM3MWJjYzE7XG4kc2Vjb25kYXJ5LWNvbG9yLWRhcms6ICNjZTMyMWM7XG4kc2Vjb25kYXJ5LWNvbG9yLWxpZ2h0OiNmZTdmNzA7XG4kc2Vjb25kYXJ5LWNvbG9yLXhkYXJrOiNhMjFkMGE7XG4kc2Vjb25kYXJ5LWNvbG9yLXhsaWdodDojZmZhMTk4O1xuJHNlY29uZGFyeS1jb2xvcjogI2U2NTg0NDtcbiR0ZXJ0aWFyeS1jb2xvcjojNzFjZTk5O1xuJHF1YXRlcm5hcnktY29sb3I6I2VlYmQ2MDtcbiRkYXJrLXRleHQtY29sb3I6IzRlNGU0ZTtcbiRsaWdodC10ZXh0LWNvbG9yOiNhNWE1YTU7XG4kb25saW5lLWNvbG9yOmxpbWU7XG4kb2ZmbGluZS1jb2xvcjpncmF5O1xuQG1peGluIHJvdGF0ZSgkZGVncmVlcykge1xuICAgIC13ZWJraXQtdHJhbnNmb3JtOiByb3RhdGUoJGRlZ3JlZXMpO1xuICAgIC1tb3otdHJhbnNmb3JtOiByb3RhdGUoJGRlZ3JlZXMpO1xuICAgIC1tcy10cmFuc2Zvcm06IHJvdGF0ZSgkZGVncmVlcyk7XG4gICAgLW8tdHJhbnNmb3JtOiByb3RhdGUoJGRlZ3JlZXMpO1xuICAgIHRyYW5zZm9ybTogcm90YXRlKCRkZWdyZWVzKTtcbn1cbkBtaXhpbiBib3gtc2hhZG93KCRsZWZ0LCAkdG9wLCAkcmFkaXVzLCAkY29sb3IpIHtcblx0Ym94LXNoYWRvdzogJGxlZnQgJHRvcCAkcmFkaXVzICRjb2xvcjtcblx0LXdlYmtpdC1ib3gtc2hhZG93OiAkbGVmdCAkdG9wICRyYWRpdXMgJGNvbG9yO1xuXHQtbW96LWJveC1zaGFkb3c6ICRsZWZ0ICR0b3AgJHJhZGl1cyAkY29sb3I7XG59XG5AbWl4aW4gYm94LXNoYWRvdy1mdWxsKCRsZWZ0LCAkdG9wLCAkYmx1ciwgJHNwcmVhZCwgJGNvbG9yKSB7XG5cdGJveC1zaGFkb3c6ICRsZWZ0ICR0b3AgJGJsdXIgJHNwcmVhZCAkY29sb3I7XG5cdC13ZWJraXQtYm94LXNoYWRvdzogJGxlZnQgJHRvcCAkYmx1ciAkc3ByZWFkICRjb2xvcjtcblx0LW1vei1ib3gtc2hhZG93OiAkbGVmdCAkdG9wICRibHVyICRzcHJlYWQgJGNvbG9yO1xufVxuQG1peGluIGJveC1zaGFkb3ctZnVsbC1pbnNldCgkbGVmdCwgJHRvcCwgJGJsdXIsICRzcHJlYWQsICRjb2xvcikge1xuXHRib3gtc2hhZG93OiBpbnNldCAkbGVmdCAkdG9wICRibHVyICRzcHJlYWQgJGNvbG9yO1xuXHQtd2Via2l0LWJveC1zaGFkb3c6IGluc2V0ICRsZWZ0ICR0b3AgJGJsdXIgJHNwcmVhZCAkY29sb3I7XG5cdC1tb3otYm94LXNoYWRvdzogaW5zZXQgJGxlZnQgJHRvcCAkYmx1ciAkc3ByZWFkICRjb2xvcjtcbn1cbkBtaXhpbiBib3JkZXItcmFkaXVzKCRyYWRpdXMpIHtcblx0Ym9yZGVyLXJhZGl1czogJHJhZGl1cztcblx0LXdlYmtpdC1ib3JkZXItcmFkaXVzOiAkcmFkaXVzO1xuICAgIC1tb3otYm9yZGVyLXJhZGl1czogJHJhZGl1cztcbiAgICAtLWJvcmRlci1yYWRpdXM6JHJhZGl1cztcbn1cbkBtaXhpbiB0cmFuc2Zvcm0oJHRyYW5zZm9ybXMpIHtcblx0LXdlYmtpdC10cmFuc2Zvcm06ICR0cmFuc2Zvcm1zO1xuXHQtbW96LXRyYW5zZm9ybTogJHRyYW5zZm9ybXM7XG5cdC1tcy10cmFuc2Zvcm06ICR0cmFuc2Zvcm1zO1xuXHR0cmFuc2Zvcm06ICR0cmFuc2Zvcm1zO1xufSJdfQ== */\";","import { AuthService } from 'src/app/services/auth.service';\nimport { of } from 'rxjs';\nimport { catchError } from 'rxjs/operators';\nimport { IonRefresher } from '@ionic/angular';\nimport { UserService } from 'src/app/services/user.service';\nimport { Discount } from './../../models/discount';\nimport { AlertService } from './../../services/alert.service';\nimport { Component, OnInit } from '@angular/core';\nimport { UntilDestroy, untilDestroyed } from '@ngneat/until-destroy';\n\n@UntilDestroy()\n@Component({\n  selector: 'app-affiliate-code',\n  templateUrl: './affiliate-code.page.html',\n  styleUrls: ['./affiliate-code.page.scss'],\n})\nexport class AffiliateCodePage implements OnInit {\n  affilitateCode = null;\n  discounts:Discount[] = [];\n  refresher:IonRefresher = null;\n  isSubmitting = false;\n  constructor(\n    private alert:AlertService,\n    private userService:UserService,\n    private auth:AuthService\n  ) { }\n\n  ngOnInit() {\n    this.userService.discountsShared.getUpdateNotifier(this).subscribe(result=>{\n      this.discounts = this.userService.discountsShared.resource();\n      if(this.refresher)\n      {\n        this.refresher.complete();\n      }\n    });\n    this.auth.getUser().then((user) => {\n      this.affilitateCode = user.phone;\n    })\n\n    this.userService.discountsShared.request();\n  }\n  refresh(ev)\n  {\n    this.refresher = ev.target;\n    this.userService.discountsShared.request();\n  }\n  useDiscount(discountId)\n  {\n    this.isSubmitting = true;\n    this.userService.useDiscount(discountId).pipe(catchError(error=>{\n      this.alert.presentError(\"شارژ حساب با مشکل روبرو شد.\");\n      return of(-1);\n    })).subscribe(result=>{\n      if(result != 1)\n      {\n        this.alert.presentSuccess(\"حساب شما شارژ شد.\");\n        this.userService.balanceShared.request();\n        this.userService.discountsShared.request();\n\n      }\n      this.isSubmitting = false;\n    })\n  }\n  copyToClipboard()\n  {\n    navigator.clipboard.writeText(this.affilitateCode).then(()=>{\n      this.alert.presentToast(\"کد معرفی کپی شد.\");\n    })\n  }\n  ngOnDestroy(): void {\n    //Called once, before the instance is destroyed.\n    //Add 'implements OnDestroy' to the class.\n    \n  }\n\n}\n","export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"end\\\">\\n      <app-loading-toolbar-button></app-loading-toolbar-button>\\n    </ion-buttons>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-menu-button menu=\\\"end\\\">\\n        <ion-icon name=\\\"menu-outline\\\"></ion-icon>\\n      </ion-menu-button>\\n    </ion-buttons>\\n    <ion-title>تخفیف و معرفی به دوستان</ion-title>\\n    <ion-buttons class=\\\"\\\" slot=\\\"end\\\">\\n      <ion-back-button  ></ion-back-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n<ion-content>\\n  <ion-refresher slot=\\\"fixed\\\" (ionRefresh)=\\\"refresh($event)\\\">\\n    <ion-refresher-content></ion-refresher-content>\\n  </ion-refresher>\\n  <div class=\\\"action-container\\\">\\n    <div class=\\\"action-content p-3\\\">\\n      <p class=\\\"p-3 mb-1 text-center guide-text normal-text primary-color-text\\\">\\n        کد زیر را برای دوستان خود ارسال کنید. با ثبت آن ها و استفاده از این کد\\n        هنگام ثبت نام، هر دو کد تخفیف دریافت کنید.\\n      </p>\\n      <div\\n        (click)=\\\"copyToClipboard()\\\"\\n        class=\\\"m-2 d-flex align-items-center justify-content-center light-text large-text\\\"\\n      >\\n        <span class=\\\"affiliate-code\\\">{{affilitateCode}}</span>\\n        <ion-button class=\\\"icon-button\\\">\\n          <ion-icon name=\\\"copy-outline\\\"></ion-icon>\\n        </ion-button>\\n      </div>\\n      <div class=\\\"discounts mt-4\\\">\\n        <span *ngIf=\\\"discounts.length\\\" class=\\\"d-block primary-color-text normal-text text-center mt-3 mb-2\\\">\\n        تخفیف های من\\n        </span>\\n        <div\\n          class=\\\"discount mb-2 d-flex justify-content-around align-items-center\\\"\\n          *ngFor=\\\"let discount of discounts\\\"\\n        >\\n          <div class=\\\"discount-value d-flex align-items-center\\\">\\n            <span class=\\\"discount-value-number number-text normal-text ml-1\\\">\\n              {{discount.value}}\\n            </span>\\n            <span class=\\\"discount-value-currency light-text small-text\\\">\\n              تومان\\n            </span>\\n          </div>\\n\\n          <span\\n            class=\\\"discount-expired small-text\\\"\\n            [ngClass]=\\\"(discount.expired)?'secondary-color-text':'primary-color-text'\\\"\\n          >\\n            {{(discount.expired)?'منقضی شده': 'قابل استفاده'}}\\n          </span>\\n          <app-submit-button\\n            [disabled] = \\\"discount.expired\\\"\\n            class=\\\"use-discount-button\\\"\\n            [isInlineAction]=\\\"true\\\"\\n            (submitted)=\\\"useDiscount(discount.id)\\\"\\n            [isWaiting] =\\\"isSubmitting\\\"\\n            text=\\\"شارژ موجودی\\\"\\n          >\\n          </app-submit-button>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <div class=\\\"actions\\\">\\n      <div class=\\\"actions-wrapper\\\"></div>\\n    </div>\\n  </div>\\n</ion-content>\\n\";"]}